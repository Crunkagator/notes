<link
  rel="stylesheet"
  href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
  integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
  crossorigin="anonymous"
/>
<header>
  <nav class="navbar d-flex justify-content-between sticky-top navbar-dark bg-dark">
    <div class="navbar-brand">NoteSPA.io</div>
    <div class="input-group input-group-sm mr-2">
      <input id="filter" class="form-control" [formControl]="filterInput" placeholder="Filter by tag..." />
      <div class="input-group-append">
        <label class="mb-0 input-group-text" for="filter">Filter notes</label>
      </div>
    </div>
  </nav>
</header>
<main>
  <div class="main-container">
    <div class="input-wrapper">
      <div class="d-flex align-items-center justify-content-between my-2 flex-wrap">
        <label class="mb-0 mx-2" for="textInput">
          <div *ngIf="symbolsLeft == 1000">Type your awesome note</div>
          <div *ngIf="symbolsLeft < 1000 && symbolsLeft > 0">
            Way to go, {{ symbolsLeft }} symbol<span *ngIf="symbolsLeft > 1">s</span>
            left
          </div>
          <div *ngIf="symbolsLeft <= 0">You have no more symbols left :(</div>
        </label>
        <button class="btn btn-success mx-2" *ngIf="editMode === false" (click)="addNote()">
          Create new note
        </button>
        <button class="btn btn-warning mx-2" *ngIf="editMode === true" (click)="saveNote()">
          Save note
        </button>
      </div>
      <div class="textarea-container">
        <div class="highlights-container">
          <div id="highlights" class="highlighter"></div>
        </div>
        <textarea id="textInput" class="noteInput" [formControl]="noteInput" placeholder="Type something great here..."></textarea>
      </div>
      <div id="errorOutput"></div>
      <div class="out">
        <div class="tag mx-2" *ngFor="let tag of tags" (click)="deleteTag(tag)">
          {{ tag }}
        </div>
        <div class="mx-2">Add some tags (click to delete):</div>
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <div class="mx-2 my-2 input-group input-group-sm">
            <select id="tagSelector">
              <option *ngFor="let tag of tagsPool" [value]="tag">{{
                tag
                }}</option>
            </select>
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" (click)="chooseTag()">
                Choose Tag
              </button>
            </div>
          </div>
          <div class="mx-2 my-2 input-group input-group-sm">
            <input [formControl]="tagInput" placeholder="New tag..." />
            <div class="input-group-append">
              <button class="btn btn-outline-secondary" (click)="addTag()">
                Add New Tag
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="output-wrapper">
      <div>Your notes:</div>
      <div *ngIf="filterInput.status === 'INVALID'" class="list-group list-group-flush">
        <div *ngFor="let note of notes" class="d-flex justify-content-between mx-2 list-group-item">
          <div class="w-90 note">
            <div class="note-text">{{ note.text }}</div>
            <div class="tag" *ngFor="let tag of note.tags">{{ tag }}</div>
          </div>
          <div class="d-flex w-10 justify-content-end align-items-start flex-row">
            <i class="fas mx-2 fa-trash" *ngIf="!editMode" (click)="deleteNote(note)"></i>
            <i class="far mx-2 fa-edit" *ngIf="!editMode" (click)="editNote(note)"></i>
          </div>
        </div>
      </div>
      <div *ngIf="filterInput.status === 'VALID'" class="list-group list-group-flush">
        <div *ngFor="let note of sortedNotes" class="d-flex justify-content-between mx-2 list-group-item">
          <div class="w-90 note">
            <div class="note-text">{{ note.text }}</div>
            <div class="tag" *ngFor="let tag of note.tags">{{ tag }}</div>
          </div>
          <div class="d-flex w-10 justify-content-end align-items-start flex-row">
            <i class="fas mx-2 fa-trash" *ngIf="!editMode" (click)="deleteNote(note)"></i>
            <i class="far mx-2 fa-edit" *ngIf="!editMode" (click)="editNote(note)"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
